# `domain/repositories`

Repository のインターフェイス

## 概要

- Repository のインターフェイスは Repository の実装を抽象化する

## 実装方針

- TypeScript の interface 構文で実装する
  - このインターフェイスを実装クラスが implements する
- Repository のインターフェイスはドメイン内に置き、ドメインオブジェクトが Repository を利用する場合はこのインターフェイスに対して依頼する

## 依存関係逆転の原則（DIP）

ドメイン層はインフラストラクチャ層に依存してはならない  
つまり、インフラストラクチャ層が上位に位置している

ドメイン層にインフラストラクチャのインターフェイスを置き、ドメインもインフラストラクチャもこのインターフェイスを参照するようにする  
ドメインはドメイン層のインターフェイスを利用するだけで良くなったので、インフラストラクチャ層に依存する必要がなくなった  
インフラストラクチャはドメイン層のインターフェイスを利用するので、インフラストラクチャ層がドメイン層に依存することとなった

## Data Access Object（DAO）との違い

- リポジトリはドメインオブジェクトの集約単位でインターフェイスを提供する
  - リポジトリのインターフェイスはドメイン層で保持する
- DAO は DB のテーブル単位で CRUD インターフェイスを提供する
  - DAO はインフラストラクチャ層で利用する
